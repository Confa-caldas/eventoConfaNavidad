<div class="mt-3 mx-1 row">
  <main class="container m-0 p-0">
    <div class="mb-3 pr-2">
      <input
        (keyup.enter)="listarPersonas(buscarTexto.value)"
        #buscarTexto
        class="form-control"
        type="text"
        list="dataListOptions"
        placeholder="Digita la cédula o el nombre del colaborador"
      />
      <datalist id="dataListOptions">
        <select>
          <option
            *ngFor="let colaborador of this.listaAsistentes"
            [value]="colaborador.documento"
          >
            {{ colaborador.nombre }}
          </option>
        </select>
      </datalist>
    </div>

    <div class="pr-2">
      <button
        (click)="listarPersonas(buscarTexto.value)"
        class="btn btn-info btn-block"
        type="button"
      >
        Buscar
      </button>
    </div>
    <br />
    <div class="pr-2">
      <button
        class="btn btn-facial btn-block animate__animated animate__fadeIn animate__fast"
        (click)="registroFacial()"
      >
        <img src="assets/img/facial blue2.png" class="m-0 p-0" /> Reconocimiento
        facial
      </button>
    </div>
    <br />
    <div class="pr-2 mt-1">
      <button
        (click)="limpiarBusqueda()"
        class="btn btn-outline-danger btn-block"
      >
        Limpiar
      </button>
    </div>
  </main>
</div>

<div class="mb-3 mt-3 animated fadeIn fast" *ngIf="resBusqueda">
  <div class="col-md-12">
    <div class="alert alert-info" role="alert">
      No existen resultados para la cédula: {{ parametro }}
    </div>
  </div>
</div>
<div *ngIf="this.asistentes.length > 0">
  <div class="card mt-3" *ngFor="let x of this.asistentes">
    <div class="card-body">
      <h5 class="card-title">{{ x.nombre }}</h5>
      <p class="card-text">{{ x.documento }}</p>
      <p class="card-text" *ngIf="x.edad != ''">Edad: {{ x.edad }}</p>
      <p class="card-text" *ngIf="x.genero != ''">Genero: {{ x.genero }}</p>
      <form>
        <div class="form-check" *ngFor="let y of x.beneficios; let i = index">
          <div *ngIf="y.estado == '1'">
            <input
              type="checkbox"
              (change)="toggleEditable($event, y.idBeneficio)"
            />
            <label style="margin-left: 6px">{{ y.nombre }}</label>
          </div>
        </div>
      </form>

      <button
        *ngIf="resBeneficios"
        (click)="entregarBeneficio(x.documento)"
        class="btn btn-info btn-block"
        type="button"
      >
        Entregar
      </button>
      <p class="card-text" *ngIf="!resBeneficios">
        <i>Esta persona no tiene beneficios para entregar</i>
      </p>
    </div>
  </div>
</div>

<button
  type="button"
  class="btn-camara btn btn-primary"
  data-toggle="modal"
  data-target="#modalCamara"
>
  Form Camara
</button>
<div
  class="modal fade modal-camara"
  id="modalCamara"
  tabindex="-1"
  role="dialog"
  aria-labelledby="modalPopupLoginLabel"
  aria-hidden="true"
  data-backdrop="static"
  data-keyboard="false"
>
  <div
    class="modal-dialog modal-lg modal-dialog-centered justify-content-center"
    role="document"
  >
    <div class="modal-content">
      <div
        class="modal-header camara-header"
        id="modalCamaraLabel"
        style="background-color: #ff2b81; color: #fff; font-style: bold"
      >
        <div class="col-md-11 text-center">
          <div
            class="justify-content-center"
            style="display: flex; align-items: center"
          >
            <img
              src="assets/img/facial.png"
              class="m-0 p-0"
              style="width: 40px"
              class="animate__animated animate__fadeIn animate__fast"
            />
            <div class="p-0" style="margin-left: 10px">
              Reconocimiento facial
            </div>
          </div>
        </div>
        <button
          type="button"
          class="close btn-close-camara text-white"
          (click)="closeModalFacial()"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container2">
          <div class="row">
            <div class="col-12 d-flex justify-content-center">
              <div
                class="card-login card border d-flex flex-column align-items-center align-items-stretch"
              >
                <div class="card-body card-body-login animated fadeIn fast">
                  <div
                    style="text-align: center"
                    class="wrapper"
                    (window:resize)="onResize($event)"
                  >
                    <div>
                      <div class="container">
                        <div
                          class="textCamaraInactiva p-1"
                          *ngIf="errors.length > 0"
                        >
                          <h4 *ngIf="errors.length > 0" class="mt-4">
                            Cámara desactivada:
                          </h4>
                          <div *ngFor="let error of errors">
                            <p>
                              Se debe dar permisos al navegador para utilizar la
                              cámara y poder continuar
                            </p>

                            <p></p>
                          </div>
                        </div>
                      </div>

                      <webcam
                        [height]="height"
                        [width]="width"
                        [trigger]="triggerObservable"
                        (imageCapture)="handleImage($event)"
                        *ngIf="showWebcam"
                        [allowCameraSwitch]="allowCameraSwitch"
                        [switchCamera]="nextWebcamObservable"
                        [videoOptions]="videoOptions"
                        (cameraSwitched)="cameraWasSwitched($event)"
                        (initError)="handleInitError($event)"
                      ></webcam>
                      <br />

                      <button
                        class="btn-credits btn mt-1 mb-1 validar"
                        [disabled]="errors.length > 0"
                        (click)="triggerSnapshot()"
                      >
                        <h4 class="m-0">Validar</h4>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Button modal success -->
<button
  type="button"
  class="btn-modal-success-facial btn btn-primary"
  data-toggle="modal"
  data-target="#modalSuccessFacial"
  hidden="false"
>
  Modal success
</button>

<!-- Modal success confirmacion facial -->
<div
  class="modal fade modal-success"
  id="modalSuccessFacial"
  tabindex="-1"
  role="dialog"
  aria-labelledby="modalSuccessLabel"
  aria-hidden="true"
  data-backdrop="static"
  data-keyboard="false"
>
  <div
    class="modal-dialog modal-dialog-centered justify-content-center"
    role="document"
  >
    <div class="modal-content">
      <div class="modal-header success-header" id="modalSuccessLabel">
        <div>
          <div class="d-flex align-items-center justify-content-center m-4">
            <img
              src="assets/img/success.png"
              class="animate__animated animate__fadeIn animate__fast"
            />
          </div>
        </div>
      </div>
      <div class="modal-body">
        <div class="text-center p-2">
          <h6 class="m-0 pt-3 pb-3">
            {{ utilitiesService.messageTitleModal }}
          </h6>
          <div class="m-0 pt-3 pb-3">
            <p class="m-0" [innerHTML]="utilitiesService.messageModal"></p>
          </div>
        </div>
        <div class="p-2">
          <div class="d-flex justify-content-between gap-3">
            <button
              type="button"
              class="btn flex-fill btn-cancelar"
              data-dismiss="modal"
              aria-label="Close"
            >
              Cancelar
            </button>
            <button
              type="button"
              class="btn flex-fill btn-aceptar"
              (click)="buscarPersonaFacial()"
              data-dismiss="modal"
              aria-label="Close"
            >
              Aceptar
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
